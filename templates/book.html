{% extends 'base.html' %}
{% block content %}

{% if session.user == "admin" %}

<div class="container col s12 m8 l6 offset-l3 offset-m2 card">
    <div class="card-content action-card-container">
        <div class="center-align row s12 admin-controls">
            <span><a href="{{ url_for("delete_book", book_id=book._id)}}" class="btn-small red">Delete book</a></span>
            <span><a href="{{ url_for("edit_book", book_id=book._id)}}" class="btn-small blue">Edit book</a></span>
        </div>
    </div>
</div>

{% endif %}

<div class="col s12">
    <div class="card horizontal row">
        <div class=" col s3 card-image valign-wrapper">
            <img src="{{ book.image_url }}" alt="{{ book.title }}">
        </div>
        <div class="card-stacked col s9">
            <div class="card-content">
                <h4 class="flow-text">{{ book.title }}</h4>
                <div class="valign-wrapper">
                    {% if book.ratings %}
                    {% for i in range(0, book.ratings) %}
                    <span><i class="material-icons yellow-text">star</i></span>
                    {% endfor %}
                    <span>{{ book.ratings }}</span>
                    {% else %}
                    <span><i class="material-icons yellow-text">star_border</i></span>
                    <span>No current ratings</span>
                    {% endif %}
                </div>
                <em class="flow-text">{{ book.author }}</em>
                <p>{{ book.summary }}</p>
            </div>
        </div>
    </div>
</div>

{% if session.user %}

<div class="container hoverable col s12 m8 l6 offset-l3 offset-m2 card">
    <div class="action-card-container">
        <div class="center-align row s12">
            <h5 class="inline white center-align">What did you think of <br><em>"{{book.title}}"?</em></h5>
        </div>
        <div class="center-align row s12">
            <a class="btn red darken-2 hoverable">Add a review
                <i class="material-icons right">rate_review</i>
            </a>
        </div>
    </div>
</div>

{% endif %}

{% endblock content %}